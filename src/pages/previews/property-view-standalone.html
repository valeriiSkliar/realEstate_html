<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Недвижимость</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <app-header></app-header>
    <app-mobile-menu></app-mobile-menu>

    <main class="page-content">
      <div id="app">
        <div class="property-detail-page">
          <div class="featured-section">
            <custom-breadcrumb theme="light" class="my-3">
              <breadcrumb-item href="/">Главная</breadcrumb-item>
              <breadcrumb-item href="/search.html">Поиск</breadcrumb-item>
              <breadcrumb-item href="/property-view-standalone.html"
                >Студия, 65.6 м² | Черемушки</breadcrumb-item
              >
            </custom-breadcrumb>
          </div>
          <div class="container-fluid px-0">
            <div class="property-gallery mb-4">
              <div class="gallery-container">
                <!-- Левый блок с превью -->
                <div class="gallery-thumbnails">
                  <div class="thumbnail-item active" data-index="0">
                    <img
                      src="https://fakeimg.pl/200x150/?retina=1&font=noto&text=image_1"
                      alt="Preview 1"
                    />
                  </div>
                  <div class="thumbnail-item" data-index="1">
                    <img
                      src="https://fakeimg.pl/200x150/?retina=1&font=noto&text=image_2"
                      alt="Preview 2"
                    />
                  </div>
                  <div class="thumbnail-item" data-index="2">
                    <img
                      src="https://fakeimg.pl/200x150/?retina=1&font=noto&text=image_3"
                      alt="Preview 3"
                    />
                  </div>
                  <div class="thumbnail-item" data-index="3">
                    <img
                      src="https://fakeimg.pl/200x150/?retina=1&font=noto&text=image_4"
                      alt="Preview 4"
                    />
                  </div>
                  <div class="thumbnail-item" data-index="4">
                    <img
                      src="https://fakeimg.pl/200x150/?retina=1&font=noto&text=image_5"
                      alt="Preview 5"
                    />
                  </div>
                </div>

                <!-- Правый блок с основным изображением -->
                <div class="gallery-main">
                  <div class="main-image-container">
                    <button
                      class="gallery-nav-btn gallery-nav-prev"
                      id="gallery-prev"
                    >
                      <i class="bi bi-chevron-left"></i>
                    </button>

                    <div class="main-image-wrapper">
                      <img
                        id="main-gallery-image"
                        src="https://fakeimg.pl/1920x1080/?retina=1&font=noto&text=image_1"
                        class="main-image"
                        alt="3-комнатная квартира, 85 м²"
                      />
                    </div>

                    <button
                      class="gallery-nav-btn gallery-nav-next"
                      id="gallery-next"
                    >
                      <i class="bi bi-chevron-right"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="container-fluid px-0">
            <div class="property-detail-header">
              <h1 class="property-detail-header__title">
                Студия, 65.6 м² | Черемушки
              </h1>
              <button
                class="property-detail-header__favorite-btn"
                type="button"
                aria-label="Добавить в избранное"
              >
                <i class="bi bi-heart"></i>
              </button>
            </div>
          </div>
          <div class="property-detail-pricing">
            <div class="property-detail-pricing__main">
              <div class="price-block">
                <div class="price-block__main">₽ 12 000 000</div>
                <div class="price-block__per-meter">127 000 ₽ за м²</div>
              </div>
              <div class="author-block">
                <div class="author-block__label">Автор</div>
                <a href="tel:89182542536" class="author-block__phone"
                  >8 918 254 25 36</a
                >
              </div>
            </div>
          </div>

          <div class="property-detail-info">
            <div class="property-detail-info__main">
              <div class="property-info-block">
                <h2 class="property-info-block__complex-name">
                  ЖК «Солнечный»
                </h2>
                <div class="property-info-block__address">
                  Краснодар, ул. Ленина, 126, Фестивальный
                </div>
              </div>
              <div class="property-meta-block">
                <div class="property-meta-block__item">
                  <span class="property-meta-block__label">Обновлено:</span>
                  <span class="property-meta-block__value"
                    >сегодня в 10:45</span
                  >
                </div>
                <div class="property-meta-block__item">
                  <span class="property-meta-block__stats"
                    >1198 просмотров, 41 за сегодня</span
                  >
                </div>
              </div>
            </div>
          </div>

          <div class="property-characteristics">
            <div class="property-characteristics__main">
              <h3 class="property-characteristics__title">О квартире</h3>
              <div class="property-characteristics__grid">
                <div class="characteristic-item">
                  <span class="characteristic-item__label"
                    >Название комплекса</span
                  >
                  <span class="characteristic-item__value">ЖК «Фонтаны»</span>
                </div>
                <div class="characteristic-item">
                  <span class="characteristic-item__label">Район</span>
                  <span class="characteristic-item__value">Черемушки мкр.</span>
                </div>
                <div class="characteristic-item">
                  <span class="characteristic-item__label">Улица</span>
                  <span class="characteristic-item__value"
                    >Ставропольская ул.</span
                  >
                </div>
                <div class="characteristic-item">
                  <span class="characteristic-item__label"
                    >Количество комнат</span
                  >
                  <span class="characteristic-item__value">Студия</span>
                </div>
                <div class="characteristic-item">
                  <span class="characteristic-item__label"
                    >Общая площадь, м²</span
                  >
                  <span class="characteristic-item__value">65.60</span>
                </div>
                <div class="characteristic-item">
                  <span class="characteristic-item__label">Состояние</span>
                  <span class="characteristic-item__value">Ремонт</span>
                </div>
                <div class="characteristic-item">
                  <span class="characteristic-item__label">Этаж</span>
                  <span class="characteristic-item__value">10</span>
                </div>
                <div class="characteristic-item">
                  <span class="characteristic-item__label">Телефон агента</span>
                  <a href="tel:89182542536" class="characteristic-item__value"
                    >8 918 254 25 36</a
                  >
                </div>
              </div>
            </div>
          </div>
          <div
            class="container-fluid px-0 mt-3 d-flex flex-column justify-content-center align-items-center gap-3"
          >
            <brand-button variant="solid">Добавить в подборку</brand-button>
            <brand-button variant="solid" color="turquoise"
              >Пожаловаться</brand-button
            >
          </div>
        </div>
      </div>
    </main>

    <app-footer></app-footer>
    <div class="toast-container position-fixed bottom-0 end-0 p-3"></div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Gallery images data
        const galleryImages = [
          {
            src: "https://fakeimg.pl/1920x1080/?retina=1&font=noto&text=image_1",
            thumb:
              "https://fakeimg.pl/200x150/?retina=1&font=noto&text=image_1",
            alt: "Изображение 1",
          },
          {
            src: "https://fakeimg.pl/1920x1080/?retina=1&font=noto&text=image_2",
            thumb:
              "https://fakeimg.pl/200x150/?retina=1&font=noto&text=image_2",
            alt: "Изображение 2",
          },
          {
            src: "https://fakeimg.pl/1920x1080/?retina=1&font=noto&text=image_3",
            thumb:
              "https://fakeimg.pl/200x150/?retina=1&font=noto&text=image_3",
            alt: "Изображение 3",
          },
          {
            src: "https://fakeimg.pl/1920x1080/?retina=1&font=noto&text=image_4",
            thumb:
              "https://fakeimg.pl/200x150/?retina=1&font=noto&text=image_4",
            alt: "Изображение 4",
          },
          {
            src: "https://fakeimg.pl/1920x1080/?retina=1&font=noto&text=image_5",
            thumb:
              "https://fakeimg.pl/200x150/?retina=1&font=noto&text=image_5",
            alt: "Изображение 5",
          },
        ];

        let currentImageIndex = 0;
        const mainImage = document.getElementById("main-gallery-image");
        const thumbnails = document.querySelectorAll(".thumbnail-item");
        const prevBtn = document.getElementById("gallery-prev");
        const nextBtn = document.getElementById("gallery-next");

        // Function to update main image
        function updateMainImage(index) {
          if (index < 0 || index >= galleryImages.length) return;

          currentImageIndex = index;
          mainImage.src = galleryImages[index].src;
          mainImage.alt = galleryImages[index].alt;

          // Update active thumbnail
          thumbnails.forEach((thumb, i) => {
            thumb.classList.toggle("active", i === index);
          });
        }

        // Thumbnail click handlers
        thumbnails.forEach((thumbnail, index) => {
          thumbnail.addEventListener("click", () => {
            updateMainImage(index);
          });
        });

        // Navigation buttons
        prevBtn.addEventListener("click", () => {
          const newIndex =
            currentImageIndex > 0
              ? currentImageIndex - 1
              : galleryImages.length - 1;
          updateMainImage(newIndex);
        });

        nextBtn.addEventListener("click", () => {
          const newIndex =
            currentImageIndex < galleryImages.length - 1
              ? currentImageIndex + 1
              : 0;
          updateMainImage(newIndex);
        });

        // Keyboard navigation
        document.addEventListener("keydown", (e) => {
          if (e.key === "ArrowLeft") {
            prevBtn.click();
          } else if (e.key === "ArrowRight") {
            nextBtn.click();
          }
        });

        // Favorite button toggle
        const favoriteButton = document.querySelector(
          ".property-detail-header__favorite-btn"
        );
        if (favoriteButton) {
          favoriteButton.addEventListener("click", function () {
            const icon = this.querySelector("i");
            icon.classList.toggle("bi-heart");
            icon.classList.toggle("bi-heart-fill");
            // Дополнительно можно менять title
            if (icon.classList.contains("bi-heart-fill")) {
              this.title = "Удалить из избранного";
            } else {
              this.title = "Добавить в избранное";
            }
          });
        }

        // Read more/less functionality
        const readMoreLink = document.querySelector(".read-more-link");
        const collapseSummary = document.getElementById("collapseSummary");

        if (readMoreLink && collapseSummary) {
          // Слушатель для события показа секции
          collapseSummary.addEventListener("show.bs.collapse", function () {
            readMoreLink.querySelector(".read-more-text").textContent =
              "Свернуть";
            readMoreLink.querySelector("i").classList.remove("bi-chevron-down");
            readMoreLink.querySelector("i").classList.add("bi-chevron-up");
          });

          // Слушатель для события скрытия секции
          collapseSummary.addEventListener("hide.bs.collapse", function () {
            readMoreLink.querySelector(".read-more-text").textContent =
              "Читать дальше";
            readMoreLink.querySelector("i").classList.remove("bi-chevron-up");
            readMoreLink.querySelector("i").classList.add("bi-chevron-down");
          });
        }
      });
    </script>
  </body>
</html>
